<?php

/**
 * ItemTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class ItemTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object ItemTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Item');
    }
    
    public static function selectItemDeForm11()
    {
        $user = sfContext::getInstance()->getUser();
        $formulario11 = $user->getAttribute('form11');
        $q = Doctrine_Query::create()
                    ->from('Item i')
                    ->leftJoin('i.Formulario11 f11')
                    ->leftJoin('i.Producto p') 
                    ->leftJoin('p.Medicamento m')
                    ->leftJoin('p.DispositivoMedico dm')
                    ->leftJoin('p.Cosmetico c')
                    ->leftJoin('p.Higiene h')
                    ->leftJoin('p.Reactivo r')
                
                    ->where('i.formulario11_id = ?', $formulario11->getId())
                    ->orderBy('i.id ASC');
        return $q;
    }
    
    
}